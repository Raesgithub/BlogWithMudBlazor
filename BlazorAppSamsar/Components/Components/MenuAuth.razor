@using BlazorAppSamsar.Components.Layout
@using Microsoft.AspNetCore.Components.Authorization
<MudAppBar Elevation="1" Style="z-index:9999999">
    <MudIconButton Icon="@Icons.Material.Filled.Menu"
                   @rendermode="@RenderMode.InteractiveServer"
                   Color="Color.Inherit"
                   Edge="Edge.Start"
                   OnClick="DrawerToggle" />
    <MudText Typo="Typo.h5" Class="ml-3">مقال جو</MudText>
    <MudSpacer />

</MudAppBar>
@if (_drawerOpen)
{
    <MudDrawer  ClipMode="DrawerClipMode.Always" Elevation="1" Style="height:100vh;right:0;display:flex !important;top:60px;padding-bottom:10px">
        <MudPaper Width="250px" Class="d-inline-flex py-3 " Elevation="0">
            <MudNavMenu Class="mud-width-full">

                <MudNavLink OnClick='()=>GotoLink("/")' Icon="@Icons.Material.Filled.Dashboard">مقالات</MudNavLink>
                <MudNavLink OnClick='() => GotoLink("/articles")'  Icon="@Icons.Material.Filled.ListAlt">مقالات من</MudNavLink>
                <MudNavLink OnClick='()=>GotoLink("/articles/add",true)'  Icon="@Icons.Material.Filled.Article">مقاله جدید</MudNavLink>
                <MudNavLink OnClick='() => GotoLink("/auth/logout")'  Icon="@Icons.Material.Filled.Logout">خروج</MudNavLink>
                
            </MudNavMenu>
        </MudPaper>
    </MudDrawer>
}

@rendermode InteractiveServer
@inject NavigationManager nav
@code {
    private bool _drawerOpen = false;

    private void DrawerToggle()
    {

        _drawerOpen = !_drawerOpen;

        StateHasChanged();
    }
    private void GotoLink(string url,bool isReload=false)
    {
        nav.NavigateTo(url, isReload);
        DrawerToggle();

        
    }
}
